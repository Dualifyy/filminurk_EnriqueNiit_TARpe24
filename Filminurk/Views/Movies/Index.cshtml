@model IEnumerable<Filminurk.Models.Movies.MoviesIndexViewModel>

@{
    int rowNumber = 1;
}

<div class="mb-3">
    <a asp-action="CreateUpdate"
       asp-controller="Movies"
       class="btn btn-primary">
        Loo uus film
    </a>
</div>

<h1>Filmid</h1>

<table class="table table-hover align-middle">
    <thead>
        <tr>
            <th>#</th>
            <th>Filmi pealkiri</th>
            <th>Aasta</th>
            <th>Kirjeldus / Plot</th>
            <th>Näitlejad</th>
            <th>Väljalaskeaeg</th>
            <th>Režissöör</th>
            <th>Hinnang</th>
            <th>Vaataja hinnang</th>
            <th>Hind</th>
            <th>Filmi pikkus</th>
            <th>Poster</th>
            <th>Tegevused</th>
        </tr>
    </thead>

    <tbody>
        @foreach (var movie in Model)
        {
            <tr>
                <td>@rowNumber</td>
                <td>@movie.Title</td>
                <td>@movie.Year</td>
                <td class="text-truncate" style="max-width: 300px;">
                    @movie.Plot
                </td>
                <td>@movie.Actors</td>
                <td>@movie.FirstPublished</td>
                <td>@movie.Director</td>
                <td>@movie.CurrentRating</td>
                <td>@movie.UserRating</td>
                <td>@movie.BuyPrice €</td>
                <td>@movie.MovieLength min</td>

                <td>
                    @if (!string.IsNullOrWhiteSpace(movie.PosterUrl) && movie.PosterUrl != "N/A")
                    {
                        <img src="@movie.PosterUrl"
                             alt="Poster"
                             style="max-height:100px; max-width:70px;"
                             class="img-thumbnail" />
                    }
                    else
                    {
                        <span class="text-muted">No poster</span>
                    }
                </td>

                <td>
                    <a asp-action="Delete"
                       asp-controller="Movies"
                       asp-route-id="@movie.ID"
                       class="btn btn-outline-danger btn-sm">
                        Delete
                    </a>
                </td>
            </tr>

            rowNumber++;
        }
    </tbody>
</table>
